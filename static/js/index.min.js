let popAlert=(e,t,r)=>{e.style.display="block",e.setAttribute("class",`alert alert-dismissible fade show ${r}`),e.querySelector(".message").innerHTML=t,e.querySelector("button").addEventListener("click",function(e){this.parentElement.style.display="none"})},progressBar=(e,t)=>{if(e){t.style.display="block";const r=t.querySelector(".progress-bar");return r.style.width=`${e}%`,r.setAttribute("aria-valuenow",e),void(r.innerHTML=`${e}%`)}t.style.display="none"};window.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("#img_input"),t=document.querySelector("#myform"),r=document.querySelector(".pred"),a=document.querySelector("#alert"),s=document.querySelector("#progress");let n="";e.addEventListener("change",function(){const e=new FileReader;e.addEventListener("load",()=>{n=e.result,document.querySelector(".display_image").style.backgroundImage="url("+n+")"}),e.readAsDataURL(this.files[0])}),t.addEventListener("submit",n=>{n.preventDefault();const o=e.files[0];if("image/png"==o.type||"image/jpeg"==o.type||"image/jpg"==o.type){let e=parseFloat(o.size/1048576).toFixed(2);e<=4?(formdata=new FormData(t),ajax({url:"https://gemsapi-d7s57.ondigitalocean.app/image",method:"POST",data:formdata,onsuccess:e=>{var t=JSON.parse(e);r.innerHTML=t.pred,popAlert(a,"Image has been successfully Predicted","alert-success")},onprogress:e=>progressBar(e,s),onfailure:(e,t)=>popAlert(a,`${e} - ${t}`,"alert-danger"),contentType:!1})):popAlert(a,"Image size must be upto 4 mb only","alert-warning")}else popAlert(a,"Image type not supported. Please select a supported image type(png, jpeg, jpg)","alert-warning")})});